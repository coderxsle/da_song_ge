
servers:
  # ======================================================================================================
  #                                              é¢†èˆªä¸è‰¯èµ„äº§æµ‹è¯•                                               
  - name: åŒ»ä¸“å­¦æ ¡é™„å±åŒ»é™¢
    host: 123.57.173.29
    port: 22
    username: root
    auth:
      type: ssh_key
      key_path: ~/.ssh/id_rsa
      password: Lixuesong1990
    # æœ¬åœ°å‘½ä»¤ï¼ˆåœ¨ä¸Šä¼ æ–‡ä»¶ä¹‹å‰æ‰§è¡Œï¼‰
    # å¯ä»¥ä¸ºæ¯ä¸ªä¸Šä¼ ç±»å‹é…ç½®ä¸åŒçš„æœ¬åœ°å‘½ä»¤
    local_commands:
      # åç«¯é¡¹ç›®ç¼–è¯‘å‘½ä»¤
      backend_api:
        working_dir: ~/workspace/ling_hang/ling_hang_server
        commands:
          - mvn clean package -Dmaven.test.skip=true
      # å‰ç«¯é¡¹ç›®ç¼–è¯‘å‘½ä»¤
      frontend_admin:
        working_dir: ~/workspace/ling_hang/ling_hang_admin  # å·¥ä½œç›®å½•ï¼ˆå¯é€‰ï¼‰
        commands:
          - npm install
          - npm run build:prod
    # æ–‡ä»¶ä¸Šä¼ å¯ä»¥è‡ªå®šä¹‰é¡¹ç›®ï¼Œä¾‹å¦‚ï¼šbackendã€frontendã€adminã€ã€staticã€workerç­‰
    upload:
      # åç«¯æ¥å£æœåŠ¡
      backend_api:
        - local_path: ~/Desktop/æœªå‘½åæ–‡ä»¶å¤¹/
          remote_path: /home/admin/web_projects/dccw/server-api/

        - local_path: ~/Desktop/test.sh
          remote_path: /home/admin/web_projects/dccw/server-api/bin/
      
      # å‰ç«¯é™æ€é¡µé¢  
      frontend_static: 
        - local_path: ~/workspace/ling_hang/ling_hang_admin/dist-prod/
          remote_path: /home/admin/web_projects/dccw/server-backui/

      # å‰ç«¯åå°ç®¡ç†é¡µé¢
      frontend_admin: 
        - local_path: ~/workspace/ling_hang/ling_hang_admin/dist-prod/
          remote_path: /home/admin/web_projects/dccw/server-backui/
          mode: sync   # æˆ–è€…ä½¿ç”¨ copy ï¼Œå¦‚æœä½¿ç”¨ sync åˆ™æœåŠ¡å™¨å®Œå…¨åŒæ­¥æœ¬åœ°ç›®å½•ã€‚
          delete_extra: true # è®¾ç½®ä¸º true å¯ä»¥åˆ é™¤æœåŠ¡å™¨è¯¥ç›®å½•ä¸Šå¤šä½™çš„æ—§æ–‡ä»¶ï¼Œå®ƒåªåœ¨ mode: sync æ—¶æ‰æœ‰æ„ä¹‰ã€‚

    # è¿œç¨‹æœåŠ¡å™¨éœ€è¦æ‰§è¡Œçš„å‘½ä»¤
    commands:
      # åç«¯æ‰§è¡Œå‘½ä»¤
      backend_api:
        - cd /home/admin/web_projects/dccw/server-api/bin
        - sh test.sh
  # ======================================================================================================




  # ======================================================================================================
  #                                              é¢†èˆªä¸è‰¯èµ„äº§                                               
  - name: é¢†èˆªä¸è‰¯èµ„äº§
    host: 192.168.1.10
    port: 5555
    username: deploy
    auth:
      type: ssh_key
      key_path: ~/.ssh/id_rsa

    # å¯ä»¥è‡ªå®šä¹‰ adminã€workerã€staticã€frontendã€backendç­‰
    upload:
      # å‰ç«¯åå°ç®¡ç†é¡µé¢
      frontend_admin: 
        - local_path: ~/workspace/ling_hang/ling_hang_admin/dist-prod/
          remote_path: /home/admin/web_projects/dccw/server-backui/
          mode: sync   # æˆ–è€…ä½¿ç”¨ copy ï¼Œå¦‚æœä½¿ç”¨ sync åˆ™æœåŠ¡å™¨å®Œå…¨åŒæ­¥æœ¬åœ°ç›®å½•ã€‚
          delete_extra: true # è®¾ç½®ä¸º true å¯ä»¥åˆ é™¤æœåŠ¡å™¨è¯¥ç›®å½•ä¸Šå¤šä½™çš„æ—§æ–‡ä»¶ï¼Œå®ƒåªåœ¨ mode: sync æ—¶æ‰æœ‰æ„ä¹‰ã€‚
      
      # å‰ç«¯é™æ€é¡µé¢  
      frontend_static: 
        - local_path: ~/workspace/ling_hang/ling_hang_admin/dist-prod/
          remote_path: /home/admin/web_projects/dccw/server-backui/

      # åç«¯æ¥å£æœåŠ¡
      backend_api:
        - local_path: ~/workspace/ling_hang/ling_hang_server/yudao-server/target/yudao-server.jar
          remote_path: /home/admin/web_projects/dccw/server-api/

        - local_path: ~/workspace//workspace/ling_hang/ling_hang_server/script/shell/startup1.sh
          remote_path: /home/admin/web_projects/dccw/server-api/bin

    # è¿œç¨‹æœåŠ¡å™¨éœ€è¦æ‰§è¡Œçš„å‘½ä»¤
    commands:
      # åç«¯æ‰§è¡Œå‘½ä»¤
      backend_api:
        - cd /home/admin/web_projects/dccw/server-api/bin
        - sh startup1.sh
  # ======================================================================================================


  # ======================================================================================================
  #                                              æ±½è½¦å›­åŒºé¡¹ç›®                                               
  - name: æ±½è½¦å›­åŒºé¡¹ç›®
    host: 192.168.0.106
    port: 55555
    username: admin
    auth:
      type: ssh_key
      key_path: ~/.ssh/id_rsa

   # å¯ä»¥è‡ªå®šä¹‰ adminã€workerã€staticã€frontendã€backendç­‰
    upload:
      # å‰ç«¯åå°ç®¡ç†é¡µé¢
      frontend_admin: 
        - local_path: ~/workspace/ling_hang/ling_hang_admin/dist-prod/
          remote_path: /home/admin/web_projects/dccw/server-backui/
          mode: sync   # æˆ–è€…ä½¿ç”¨ copy ï¼Œå¦‚æœä½¿ç”¨ sync åˆ™æœåŠ¡å™¨å®Œå…¨åŒæ­¥æœ¬åœ°ç›®å½•ã€‚
          delete_extra: true # è®¾ç½®ä¸º true å¯ä»¥åˆ é™¤æœåŠ¡å™¨è¯¥ç›®å½•ä¸Šå¤šä½™çš„æ—§æ–‡ä»¶ï¼Œå®ƒåªåœ¨ mode: sync æ—¶æ‰æœ‰æ„ä¹‰ã€‚ChatGPT è¯´è¿™ä¸ªé…ç½®ä¸€çœ‹å°±æ˜¯â€œåƒè¿‡çº¿ä¸Šäºâ€çš„äººå†™çš„ ğŸ˜„ 
      
      # å‰ç«¯é™æ€é¡µé¢
      frontend_static: 
        - local_path: ~/workspace/ling_hang/ling_hang_admin/dist-prod/
          remote_path: /home/admin/web_projects/dccw/server-backui/

      # åç«¯æ¥å£æœåŠ¡
      backend_api:
        - local_path: ~/workspace/ling_hang/ling_hang_server/yudao-server/target/yudao-server.jar
          remote_path: /home/admin/web_projects/dccw/server-api/

        - local_path: ~/workspace//workspace/ling_hang/ling_hang_server/script/shell/startup1.sh
          remote_path: /home/admin/web_projects/dccw/server-api/bin

    # è¿œç¨‹æœåŠ¡å™¨éœ€è¦æ‰§è¡Œçš„å‘½ä»¤
    commands:
      # åç«¯æ‰§è¡Œå‘½ä»¤
      backend_api:
        - cd /home/admin/web_projects/dccw/server-api/bin
        - sh startup1.sh
  # ======================================================================================================